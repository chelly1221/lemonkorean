# ================================================================
# RabbitMQ Configuration for Lemon Korean
# ================================================================
# Message queue configuration
# ================================================================

# -----------------------------
# Listeners
# -----------------------------
listeners.tcp.default = 5672

# -----------------------------
# Management
# -----------------------------
management.tcp.port = 15672
management.tcp.ip = 0.0.0.0

# -----------------------------
# Resource Limits
# -----------------------------
# Memory limit (relative to system memory)
vm_memory_high_watermark.relative = 0.6
vm_memory_high_watermark_paging_ratio = 0.8

# Disk free space limit
disk_free_limit.absolute = 1GB

# -----------------------------
# Default User & VHost
# -----------------------------
# Note: Default user is set via environment variables
# RABBITMQ_DEFAULT_USER and RABBITMQ_DEFAULT_PASS
default_vhost = /
default_permissions.configure = .*
default_permissions.read = .*
default_permissions.write = .*

# -----------------------------
# Clustering (for future scaling)
# -----------------------------
cluster_partition_handling = autoheal

# -----------------------------
# Queue Settings
# -----------------------------
# Maximum message size (16MB)
max_message_size = 16777216

# Consumer timeout (30 minutes)
consumer_timeout = 1800000

# -----------------------------
# Connection Settings
# -----------------------------
# Heartbeat timeout (60 seconds)
heartbeat = 60

# Connection handshake timeout
handshake_timeout = 10000

# Channel max
channel_max = 2047

# -----------------------------
# Logging
# -----------------------------
log.file.level = info
log.console = true
log.console.level = info

# -----------------------------
# Queues
# -----------------------------
# Default queue type
default_queue_type = classic

# Queue master locator for HA
queue_master_locator = min-masters

# -----------------------------
# Definitions
# -----------------------------
# Load definitions on startup
load_definitions = /etc/rabbitmq/definitions.json
